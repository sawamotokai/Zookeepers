<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zookeeper</title>
  <link rel="stylesheet" href="/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
  <body>
    <header>
      <div class="header">
        <h1 class="title">🦧Zookeeper🦘</h1>
        </p>
    </div>
    </header>
    <main>
    <section id="staff">
      <div id="staffList">
        <h2>💁‍♀️Staffs in our zoo💁🏻‍♂️</h2>
        <% for (var i =0; i < staffs.length;  i++ ) { %>
          <!-- <input type="radio" id="staff_<%= staffs[i].ID %>" name="staffId" value="<%= staffs[i].ID %>"> -->
          <!-- <label for="staff_<%= staffs[i].ID %>"><%= staffs[i].Name %></label><br> -->
          <p><%= staffs[i].Name %></p>
          <% } %>
      </div>
      
      <h2>New Staff</h2>
      <form action="/staff" method="POST" class="form">
        <label for="staffName">Name</label>
        <input id="staffName" type="text" name="name" class="input" placeholder="Bob" required>
        <button type="submit" class="btn">Create!</button>
      </form>
      <button onclick="func1()">Do something!</button>
    </div>
    </section>

    <section id="cleans">
       <div class="cleanCage">
        <h3>🧹Who cleans which cage? Pick a staff and a cage🧹</h3>
        <form action="cleanCage" method="POST">
          <div class="dropDowns">
            <label for="cleaningStaff">Pick a staff</label>
            <select name="cleaningStaff" id="cleaningStaff">
              <% for (var i =0; i < staffs.length;  i++ ) { %>
                <option value="<%= staffs[i].ID%>"><%= staffs[i].Name %></option>
                <% } %>
            </select>
            <label for="cageToClean">Pick a cage to clean</label>
            <select name="cageToClean" id="cageToClean">
              <% for (var i =0; i < cages.length;  i++ ) { %>
                <option value="<%= cages[i].ID%>"><%= cages[i].Location %></option>
                <% } %>
            </select>
          </div>
          <button type="submit">Clean cage!</button>
        </form>

        <div class="dirtyCages">
          
        </div>
       </div>
        
    </section>

    <section id="animal">
      <h2>🐘Animals in our zoo🦒</h2>
      <div id="animalList">
        <% for (var i =0; i < animals.length;  i++ ) { %>
          <!-- <label for="animal_<%= animals[i].ID %>"> -->
          <div class="animalCard">
            <!-- <input type="radio" class="radioBtn" id="animal_<%= animals[i].ID %>" name="animalId" value="<%= animals[i].ID %>"> -->
                <h4><%= animals[i].Name %> <%= animals[i].Gender === 'M' ? '♂' : '♀'%></h4>
                <div class="animalDesc">
                  <p>Species: <%= animals[i].Species%></p>
                  <p>Age: <%= animals[i].Age%></p>
                </div>
          </div>
        <!-- </label><br> -->

          <% } %>
      </div>
    <div class="animalForm">
      <h2>New Animal</h2>
      <form action="/animal" method="POST" class="form">
        <label for="animalName">Name</label>
        <input id="animalName" type="text" name="name" class="input" placeholder="Atom" required>
        <label for="animalAge">Age</label>
        <input id="animalAge" type="number" name="age" class="input" placeholder="7" required>
        <label for="animalKind">Kind</label>
        <input id="animalKind" type="text" name="kind" class="input" placeholder="cat" required>
        <button type="submit" class="btn">Create!</button>
      </form>
      </div>
    </section>
    </main>
      
  </body>
  <script>
  // DEFINE FUNCTIONS HERE!

    function func1(){
      console.log("I am in the click handler 1!"); 
    }
    const cleanCage = () => {
      // THIS IS ONE WAY TO SEND A HTTP REQUEST!!
      // const Http = new XMLHttpRequest();
      // let staffId = Array.from(document.getElementById("staffList").getElementsByTagName("input"));
      // let cageId = Array.from(document.getElementById("cageList").getElementsByTagName("input"));
      let staffId = Array.from(document.getElementById("staffList").getElementsByTagName("input")).filter(input=>input.checked)[0].value;
      let cageId = Array.from(document.getElementById("cageList").getElementsByTagName("input")).filter(input=>input.checked)[0].value;
      console.log(staffId);
      console.log(cageId);

      const url=`https://localhost:2000/cleanCage/${staffId}/${cageId}`;
      // Http.open("GET", url);
      // Http.send();
      
      // Http.onreadystatechange = (e) => {
      //   console.log(Http.responseText)
      // }
      // const axios = require('axios');

      // fetch(url).then(data=>data.json()).then(res => console.log(res)).catch(err => console.error(err));
    }

    function func2(){
      console.log("I am in the click handler 2!"); 
    }
  </script>
</html>
